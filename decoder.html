<!-- decoder.html -->
<div id="output" class="mt-6 whitespace-pre-wrap bg-gray-800 p-4 rounded text-white hidden"></div>

<script>
  document.getElementById('decodeBtn').onclick = async () => {
    const resume = localStorage.getItem('resumeText');
    const job = document.getElementById('jobDesc').value;
    const res = await fetch('/api/gpt', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        prompt: `Compare this resume: ${resume} to this job description: ${job}. Return a match score, missing keywords, and improvement suggestions.`
      })
    });
    const data = await res.json();
    console.log(data.output); // Debug
    const outputDiv = document.getElementById('output');
    outputDiv.classList.remove('hidden');
    outputDiv.textContent = data.output;
  };
</script>

