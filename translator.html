<!-- translator.html -->
<div id="output" class="mt-6 whitespace-pre-wrap bg-gray-800 p-4 rounded text-white hidden"></div>

<script>
  document.getElementById('translateBtn').onclick = async () => {
    const resume = localStorage.getItem('resumeText');
    const target = document.getElementById('targetTitle').value;
    const res = await fetch('/api/gpt', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        prompt: `Based on this resume: ${resume}, rewrite it to better fit a ${target} role. Include updated bullet points and suggest 3 current job listings with links.`
      })
    });
    const data = await res.json();
    console.log(data.output); // Debug
    const outputDiv = document.getElementById('output');
    outputDiv.classList.remove('hidden');
    outputDiv.textContent = data.output;
  };
</script>

