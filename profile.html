<!-- profile.html -->
<div id="output" class="mt-6 whitespace-pre-wrap bg-gray-800 p-4 rounded text-white hidden"></div>

<script>
  document.getElementById('buildBtn').onclick = async () => {
    const resume = localStorage.getItem('resumeText');
    const tone = document.getElementById('tone').value;
    const res = await fetch('/api/gpt', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        prompt: `Write a 2-paragraph About Me and a short LinkedIn headline using a ${tone} tone based on this resume: ${resume}`
      })
    });
    const data = await res.json();
    console.log(data.output); // Debug
    const outputDiv = document.getElementById('output');
    outputDiv.classList.remove('hidden');
    outputDiv.textContent = data.output;
  };
</script>

